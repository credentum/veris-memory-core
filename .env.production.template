# Veris Memory Production Environment Configuration
# Copy this file to .env.production and fill in the actual values

# === Core Configuration ===
VERIS_HOST=api.veris-memory.com
# NOTE: Passwords and secrets are generated securely by the deployment script
# Do not hardcode credentials here - they are automatically generated with
# cryptographically secure random values during deployment
REDIS_PASSWORD=
NEO4J_PASSWORD=
JWT_SECRET_KEY=

# === Monitoring & Analytics Security ===
# Auto-generated during deployment with secure random values
ANALYTICS_AUTH_TOKEN=

# === Production Performance Settings ===
# Monitoring
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=30
ANALYTICS_RATE_LIMIT_PER_MIN=5
DASHBOARD_RATE_LIMIT_PER_MIN=20

# Security
ENABLE_CORS=false
TRUSTED_HOSTS=127.0.0.1,localhost
DASHBOARD_AUTH_REQUIRED=true

# Performance Optimization for production System
QDRANT_MEMORY_LIMIT=8GB
NEO4J_HEAP_SIZE=4G
REDIS_MEMORY_LIMIT=2GB

# Logging
LOG_LEVEL=info
STRUCTURED_LOGGING=true

# === PR #170: Cache and Embedding Configuration ===
# Cache TTL in seconds (production: 300-900 recommended)
VERIS_CACHE_TTL_SECONDS=300

# Embedding failure behavior (production: false recommended for graceful degradation)
STRICT_EMBEDDINGS=false

# Embedding vector dimensions (REQUIRED: 384 for v1.0 compliance)
# v1.0 uses all-MiniLM-L6-v2 model which produces 384-dimensional embeddings
EMBEDDING_DIM=384

# === Optional: External Monitoring Integration ===
# Prometheus metrics endpoint (if using external monitoring)
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Health check intervals (seconds)
HEALTH_CHECK_INTERVAL=30
METRICS_RETENTION_DAYS=7

# === Production Deployment Info ===
ENVIRONMENT=production
DEPLOYMENT_DATE=$(date -u +%Y-%m-%dT%H:%M:%SZ)
GIT_COMMIT=$(git rev-parse HEAD 2>/dev/null || echo "unknown")

# === Firewall Configuration Hints ===
# Required open ports:
# - 22 (SSH)
# - 8001 (Veris API - localhost only) 
# - 8080 (Monitoring Dashboard - localhost only)
# - 2222 (Claude CLI dev - optional)
#
# UFW Rules to add:
# sudo ufw allow 22/tcp
# sudo ufw allow from 127.0.0.1 to any port 8001
# sudo ufw allow from 127.0.0.1 to any port 8080
# sudo ufw enable